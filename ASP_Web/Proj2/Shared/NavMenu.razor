@using Proj2.Code

@inject AuthStateProvider AuthStateProvider

<div>
	<nav class="flex-column">
		<ul class="nav nav-pills flex-column mb-auto">

			<AuthorizeView>
				@*<Authorized>

					<NavLink class="nav-link" href="login">
						<span class="oi oi-account-login" aria-hidden="true"></span> User - @Username
					</NavLink>

				</Authorized>*@

				<NotAuthorized>

					<NavLink class="nav-link" href="login">
						<span class="oi oi-account-login" aria-hidden="true"></span> Login
					</NavLink>

				</NotAuthorized>
			</AuthorizeView>


			<AuthorizeView>
				<Authorized>
					<li>
						<NavLink class="nav-link" href="" Match="NavLinkMatch.All">
							<span class="oi oi-home" aria-hidden="true"></span> Home
						</NavLink>
					</li>

					<li>
						<NavLink class="nav-link" href="fetchdata">
							<span class="oi oi-list-rich" aria-hidden="true"></span> Data
						</NavLink>
					</li>
				</Authorized>
			</AuthorizeView>

		</ul>
	</nav>
</div>

@code {
	private bool collapseNavMenu = false;

	private string NavMenuCssClass => collapseNavMenu ? "collapse" : null;

	string Username {
		get {
			return AuthStateProvider.GetDbUser().Username;
		}
	}

	private void ToggleNavMenu() {
		collapseNavMenu = !collapseNavMenu;
	}
}
